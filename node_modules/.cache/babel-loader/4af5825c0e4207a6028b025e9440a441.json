{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { React, useEffect } from 'react';\nimport * as THREE from 'three';\nexport default function Threejs() {\n  _s();\n\n  useEffect(() => {\n    let scene, camera, renderer;\n    let material, geometry, mesh;\n    let container = document.getElementById(\"info-container\");\n\n    function init() {\n      //create scene and camera\n      scene = new THREE.Scene();\n      camera = new THREE.PerspectiveCamera(10, window.innerWidth / window.innerHeight, 0.1, 1000);\n      camera.position.z = 1; //create render, canvas and add canvas to dom\n\n      renderer = new THREE.WebGLRenderer();\n      renderer.setSize(window.half - width, window.innerHeight);\n      document.body.appendChild(renderer.domElement);\n    }\n\n    function render() {\n      //create GPU material, geometry and mesh\n      material = new THREE.ShaderMaterial({\n        uniforms: {\n          time: {\n            value: 1.0\n          },\n          resolution: {\n            value: new THREE.Vector2(window.innerWidth, window.innerHeight)\n          },\n          mousex: {\n            value: 0\n          },\n          mousey: {\n            value: 0\n          }\n        },\n        vertexShader: document.getElementById('vertexShader').textContent,\n        fragmentShader: document.getElementById('fragmentShader').textContent\n      });\n      geometry = new THREE.PlaneGeometry(5, 5, 1);\n      mesh = new THREE.Mesh(geometry, material);\n      scene.add(mesh);\n    }\n\n    function animate() {\n      requestAnimationFrame(animate);\n      renderer.render(scene, camera); //define shader time\n\n      material.uniforms.time.value += 0.04;\n    }\n\n    ;\n    init();\n    render();\n    animate(); //cleanup gl\n\n    geometry.dispose();\n    material.dispose();\n    renderer.dispose(); //shader interactive with mouse\n    // window.addEventListener(\"mousemove\", shaderAnimate);\n    // function shaderAnimate(e){\n    // \tconst canvas = document.querySelector(\"canvas\");\n    // \tif (e.pageX >= canvas.getBoundingClientRect().left){\n    // \t\tmaterial.uniforms.mousex.value = e.pageX*0.001;\n    // \t\tmaterial.uniforms.mousey.value = e.pageY*0.001;\n    // \t}\n    // }\n    //shader interactive with scroll\n\n    window.addEventListener(\"scroll\", scrollColor);\n\n    function scrollColor(e) {\n      material.uniforms.mousex.value = window.pageXOffset * 0.01;\n      material.uniforms.mousey.value = window.pageYOffset * 0.01;\n    }\n\n    window.addEventListener('resize', () => handleResize());\n\n    function handleResize() {\n      // Update camera\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix(); // Update renderer\n\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    }\n\n    return () => {\n      //remove event listeners\n      //window.removeEventListener(\"mousemove\", shaderAnimate);\n      window.removeEventListener('scroll', handleResize);\n      window.removeEventListener('resize', handleResize); //remove canvas from tree\n\n      document.body.removeChild(renderer.domElement); //remove gpu assets\n\n      geometry.dispose();\n      material.dispose();\n      renderer.dispose();\n      scene.remove(mesh);\n      cancelAnimationFrame(animate);\n    };\n  }, []);\n  return null;\n}\n\n_s(Threejs, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Threejs;\n\nvar _c;\n\n$RefreshReg$(_c, \"Threejs\");","map":{"version":3,"sources":["/Users/bernardoagbranco/react-threejs/info-page-1/src/components/Threejs.js"],"names":["React","useEffect","THREE","Threejs","scene","camera","renderer","material","geometry","mesh","container","document","getElementById","init","Scene","PerspectiveCamera","window","innerWidth","innerHeight","position","z","WebGLRenderer","setSize","half","width","body","appendChild","domElement","render","ShaderMaterial","uniforms","time","value","resolution","Vector2","mousex","mousey","vertexShader","textContent","fragmentShader","PlaneGeometry","Mesh","add","animate","requestAnimationFrame","dispose","addEventListener","scrollColor","e","pageXOffset","pageYOffset","handleResize","aspect","updateProjectionMatrix","removeEventListener","removeChild","remove","cancelAnimationFrame"],"mappings":"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","sourcesContent":["\nimport {React, useEffect} from 'react'\nimport * as THREE from 'three';\n\nexport default function Threejs(){\n\nuseEffect(() => {\n\n\t\tlet scene, camera, renderer;\n\t\tlet material, geometry, mesh;\n\n\t\tlet container = document.getElementById(\"info-container\");\n\n\t\tfunction init(){\n\t\t\t//create scene and camera\n\t\t\tscene = new THREE.Scene();\n\t\t\tcamera = new THREE.PerspectiveCamera( 10, window.innerWidth / window.innerHeight, 0.1, 1000 );\n\t\t\tcamera.position.z = 1;\n\n\t\t\t//create render, canvas and add canvas to dom\n\t\t\trenderer = new THREE.WebGLRenderer();\n\t\t\trenderer.setSize( window.half-width, window.innerHeight);\n\t\t\tdocument.body.appendChild( renderer.domElement );\n\t\t}\n\n\t\tfunction render(){\n\t\t\t//create GPU material, geometry and mesh\n\t\t\tmaterial = new THREE.ShaderMaterial( \n\t\t\t{\t   \n\t\t\tuniforms: {\n\t\t\t\ttime: { value: 1.0 },\n\t\t\t\tresolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) },\n\t\t\t\tmousex: {value: 0},\n\t\t\t\tmousey: {value:0}\n\t\t\t},\n\t\t\tvertexShader: document.getElementById( 'vertexShader' ).textContent,\n\t\t\tfragmentShader: document.getElementById( 'fragmentShader' ).textContent\n\t\t\t} \n\t\t);\n\t\t\n\t\tgeometry = new THREE.PlaneGeometry(5,5,1);\n\t\tmesh = new THREE.Mesh( geometry, material );\n\t\tscene.add(mesh);\n\t\t}\n\n\t\tfunction animate() {\n\t\t\trequestAnimationFrame( animate );\n\t\t\trenderer.render( scene, camera );\n\t\t\t\n\t\t\t//define shader time\n\t\t\tmaterial.uniforms.time.value += 0.04;\t\n\t\t};\n\t\t\n\t\tinit();\n\t\trender();\n\t\tanimate();\n\n\t\t//cleanup gl\n\t\tgeometry.dispose();\n\t\tmaterial.dispose();\n\t\trenderer.dispose();\n\t\t\t\n\t\t//shader interactive with mouse\n\t\t// window.addEventListener(\"mousemove\", shaderAnimate);\n\t\t// function shaderAnimate(e){\n\t\t// \tconst canvas = document.querySelector(\"canvas\");\n\t\t// \tif (e.pageX >= canvas.getBoundingClientRect().left){\n\t\t// \t\tmaterial.uniforms.mousex.value = e.pageX*0.001;\n\t\t// \t\tmaterial.uniforms.mousey.value = e.pageY*0.001;\n\t\t// \t}\n\t\t// }\n\n\t\t//shader interactive with scroll\n\t\twindow.addEventListener(\"scroll\", scrollColor);\n\t\tfunction scrollColor(e){\n\t\t\tmaterial.uniforms.mousex.value = window.pageXOffset*0.01;\n\t\t\tmaterial.uniforms.mousey.value = window.pageYOffset*0.01;\n\t\t}\n\t\t\n\t    window.addEventListener('resize', ()=>handleResize());\n        function handleResize(){\n\t\t\t// Update camera\n\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\t\tcamera.updateProjectionMatrix();\n\t\t\t// Update renderer\n\t\t    renderer.setSize(window.innerWidth, window.innerHeight);\n\t\t}\n\n        return () => {\n\t\t\t//remove event listeners\n\t\t\t//window.removeEventListener(\"mousemove\", shaderAnimate);\n\t\t\twindow.removeEventListener('scroll',handleResize);\n\t\t\twindow.removeEventListener('resize',handleResize);\n\t\t\t//remove canvas from tree\n\t\t\tdocument.body.removeChild(renderer.domElement);\t\n\t\t\t//remove gpu assets\n\t\t\tgeometry.dispose();\n\t\t\tmaterial.dispose();\n\t\t\trenderer.dispose();\n\t\t\tscene.remove(mesh);\n\t\t\tcancelAnimationFrame(animate);\n\t\t}\n      },[]);\n\nreturn(\n   null\n)\n\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}
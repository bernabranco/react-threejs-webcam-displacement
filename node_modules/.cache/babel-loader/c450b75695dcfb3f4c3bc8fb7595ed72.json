{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { React, useEffect } from 'react';\nimport * as THREE from 'three';\nexport default function Threejs() {\n  _s();\n\n  useEffect(() => {\n    //create scene and camera\n    const scene = new THREE.Scene();\n    const camera = new THREE.PerspectiveCamera(10, window.innerWidth / window.innerHeight, 0.1, 1000);\n    camera.position.z = 1; //create render, canvas and add canvas to dom\n\n    const renderer = new THREE.WebGLRenderer();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(renderer.domElement); //create GPU material, geometry and mesh\n\n    const material = new THREE.ShaderMaterial({\n      uniforms: {\n        time: {\n          value: 1.0\n        },\n        resolution: {\n          value: new THREE.Vector2(window.innerWidth, window.innerHeight)\n        },\n        mousex: {\n          value: 0\n        },\n        mousey: {\n          value: 0\n        }\n      },\n      vertexShader: document.getElementById('vertexShader').textContent,\n      fragmentShader: document.getElementById('fragmentShader').textContent\n    });\n    const geometry = new THREE.PlaneGeometry(5, 5, 1);\n    const mesh = new THREE.Mesh(geometry, material); //add mesh to scene\n\n    scene.add(mesh);\n\n    function animate() {\n      requestAnimationFrame(animate);\n      renderer.render(scene, camera); //define shader time\n\n      material.uniforms.time.value += 0.04;\n    }\n\n    ;\n    animate(); //cleanup gl\n\n    geometry.dispose();\n    material.dispose();\n    mesh.clear();\n    mesh.remove();\n    renderer.clear();\n    renderer.dispose(); //shader interactive with mouse\n\n    window.addEventListener(\"mousemove\", shaderAnimate);\n\n    function shaderAnimate(e) {\n      const canvas = document.querySelector(\"canvas\");\n\n      if (e.pageX >= canvas.getBoundingClientRect().left) {\n        material.uniforms.mousex.value = e.pageX * 0.001;\n        material.uniforms.mousey.value = e.pageY * 0.001;\n      }\n    }\n\n    window.addEventListener('resize', () => handleResize());\n\n    function handleResize() {\n      // Update camera\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix(); // Update renderer\n\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    }\n\n    return () => {\n      //remove event listeners\n      window.removeEventListener(\"mousemove\", shaderAnimate);\n      window.removeEventListener('resize', handleResize); //remove canvas from tree\n\n      document.body.removeChild(renderer.domElement); //remove gpu assets\n\n      geometry.dispose();\n      material.dispose();\n      renderer.dispose();\n      scene.remove(mesh);\n      cancelAnimationFrame(animate);\n    };\n  }, []);\n  return null;\n}\n\n_s(Threejs, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Threejs;\n\nvar _c;\n\n$RefreshReg$(_c, \"Threejs\");","map":{"version":3,"sources":["/Users/bernardoagbranco/react-threejs/info-page-1/src/components/Threejs.js"],"names":["React","useEffect","THREE","Threejs","scene","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","position","z","renderer","WebGLRenderer","setSize","document","body","appendChild","domElement","material","ShaderMaterial","uniforms","time","value","resolution","Vector2","mousex","mousey","vertexShader","getElementById","textContent","fragmentShader","geometry","PlaneGeometry","mesh","Mesh","add","animate","requestAnimationFrame","render","dispose","clear","remove","addEventListener","shaderAnimate","e","canvas","querySelector","pageX","getBoundingClientRect","left","pageY","handleResize","aspect","updateProjectionMatrix","removeEventListener","removeChild","cancelAnimationFrame"],"mappings":"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","sourcesContent":["\nimport {React, useEffect} from 'react'\nimport * as THREE from 'three';\n\nexport default function Threejs(){\n\nuseEffect(() => {\n\n\t\t//create scene and camera\n\t\tconst scene = new THREE.Scene();\n\t\tconst camera = new THREE.PerspectiveCamera( 10, window.innerWidth / window.innerHeight, 0.1, 1000 );\n\t\tcamera.position.z = 1;\n\n\t\t//create render, canvas and add canvas to dom\n\t\tconst renderer = new THREE.WebGLRenderer();\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\t\tdocument.body.appendChild( renderer.domElement );\n\n\t\t//create GPU material, geometry and mesh\n\t\tconst material = new THREE.ShaderMaterial( \n\t\t\t{\t   \n\t\t\tuniforms: {\n\t\t\t\ttime: { value: 1.0 },\n\t\t\t\tresolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) },\n\t\t\t\tmousex: {value: 0},\n\t\t\t\tmousey: {value:0}\n\t\t\t},\n\t\t\tvertexShader: document.getElementById( 'vertexShader' ).textContent,\n\t\t\tfragmentShader: document.getElementById( 'fragmentShader' ).textContent\n\t\t\t} \n\t\t);\n\t\t\n\t\tconst geometry = new THREE.PlaneGeometry(5,5,1);\n\t\tconst mesh = new THREE.Mesh( geometry, material );\n\n\t\t//add mesh to scene\n\t\tscene.add(mesh);\n\n\t\tfunction animate() {\n\t\t\trequestAnimationFrame( animate );\n\t\t\trenderer.render( scene, camera );\n\t\t\t//define shader time\n\t\t\tmaterial.uniforms.time.value += 0.04;\t\n\t\t};\n\t\t\n\t\tanimate();\n\n\t\t//cleanup gl\n\t\tgeometry.dispose();\n\t\tmaterial.dispose();\n\t\tmesh.clear();\n\t\tmesh.remove();\n\t\trenderer.clear();\n\t\trenderer.dispose();\n\t\t\t\n\t\t//shader interactive with mouse\n\t\twindow.addEventListener(\"mousemove\", shaderAnimate);\n\t\tfunction shaderAnimate(e){\n\t\t\tconst canvas = document.querySelector(\"canvas\");\n\t\t\tif (e.pageX >= canvas.getBoundingClientRect().left){\n\t\t\t\tmaterial.uniforms.mousex.value = e.pageX*0.001;\n\t\t\t\tmaterial.uniforms.mousey.value = e.pageY*0.001;\n\t\t\t}\n\t\t}\n\n\t    window.addEventListener('resize', ()=>handleResize());\n        function handleResize(){\n\t\t\t// Update camera\n\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\t\tcamera.updateProjectionMatrix();\n\t\t\t// Update renderer\n\t\t    renderer.setSize(window.innerWidth, window.innerHeight);\n\t\t}\n\n        return () => {\n\t\t\t//remove event listeners\n\t\t\twindow.removeEventListener(\"mousemove\", shaderAnimate);\n\t\t\twindow.removeEventListener('resize',handleResize);\n\t\t\t//remove canvas from tree\n\t\t\tdocument.body.removeChild(renderer.domElement);\t\n\t\t\t//remove gpu assets\n\t\t\tgeometry.dispose();\n\t\t\tmaterial.dispose();\n\t\t\trenderer.dispose();\n\t\t\tscene.remove(mesh);\n\t\t\tcancelAnimationFrame(animate);\n\t\t}\n      },[]);\n\nreturn(\n   null\n)\n\n}\n\n\n\n"]},"metadata":{},"sourceType":"module"}